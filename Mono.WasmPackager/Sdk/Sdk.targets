<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="Current" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <WasmPackager_NetCore Condition="'$(WasmPackager_NetCore)' == '' AND '$(TargetFramework)' == 'netcoreapp5.0'">true</WasmPackager_NetCore>
    <WasmPackager_NetCore Condition="'$(WasmPackager_NetCore)' == ''">false</WasmPackager_NetCore>
  </PropertyGroup>

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Settings.targets" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Paths.targets" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Resolver.targets" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.CilStrip.targets" Condition="'$(WasmPackager_EnablePackager)' == 'true'" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Emscripten.targets" Condition="'$(WasmPackager_EnablePackager)' == 'true'" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Linker.targets"  Condition="'$(WasmPackager_EnableLinker)' == 'true'" />
  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Packager.targets" Condition="'$(WasmPackager_EnablePackager)' == 'true'" />

  <Import Sdk="Mono.Linker.Optimizer" Version="1.0.0" Project="Sdk.targets" Condition="'$(WasmPackager_EnableLinker)' == 'true'" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.Framework.targets" Condition="'$(_WasmPackager_SkipSdkImport)' != 'true'" />

  <Import Project="$(MSBuildThisFileDirectory)\Mono.WasmPackager.TestSuite.targets"  Condition="'$(WasmPackager_EnableTestSuite)' == 'true'" />

  <PropertyGroup>
    <RunCommand>$(JsvuDir)/sm</RunCommand>
    <RunWorkingDirectory>app</RunWorkingDirectory>
    <RunArguments>runtime.js $(WasmPackager_RunArguments) --run $(MSBuildProjectName)</RunArguments>
  </PropertyGroup>

</Project>
